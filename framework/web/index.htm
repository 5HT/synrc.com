<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
            "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>
<HEAD>
<TITLE>index</TITLE>

<META http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<META name="GENERATOR" content="hevea 1.10">
<STYLE type="text/css">
.li-itemize{margin:1ex 0ex;}
.li-enumerate{margin:1ex 0ex;}
.dd-description{margin:0ex 0ex 1ex 4ex;}
.dt-description{margin:0ex;}
.toc{list-style:none;}
.thefootnotes{text-align:left;margin:0ex;}
.dt-thefootnotes{margin:0em;}
.dd-thefootnotes{margin:0em 0em 0em 2em;}
.footnoterule{margin:1em auto 1em 0px;width:50%;}
.caption{padding-left:2ex; padding-right:2ex; margin-left:auto; margin-right:auto}
.title{margin:2ex auto;text-align:center}
.center{text-align:center;margin-left:auto;margin-right:auto;}
.flushleft{text-align:left;margin-left:0ex;margin-right:auto;}
.flushright{text-align:right;margin-left:auto;margin-right:0ex;}
DIV TABLE{margin-left:inherit;margin-right:inherit;}
PRE{text-align:left;margin-left:0ex;margin-right:auto;}
BLOCKQUOTE{margin-left:4ex;margin-right:4ex;text-align:left;}
TD P{margin:0px;}
.boxed{border:1px solid black}
.textboxed{border:1px solid black}
.vbar{border:none;width:2px;background-color:black;}
.hbar{border:none;height:2px;width:100%;background-color:black;}
.hfill{border:none;height:1px;width:200%;background-color:black;}
.vdisplay{border-collapse:separate;border-spacing:2px;width:auto; empty-cells:show; border:2px solid red;}
.vdcell{white-space:nowrap;padding:0px;width:auto; border:2px solid green;}
.display{border-collapse:separate;border-spacing:2px;width:auto; border:none;}
.dcell{white-space:nowrap;padding:0px;width:auto; border:none;}
.dcenter{margin:0ex auto;}
.vdcenter{border:solid #FF8000 2px; margin:0ex auto;}
.minipage{text-align:left; margin-left:0em; margin-right:auto;}
.marginpar{border:solid thin black; width:20%; text-align:left;}
.marginparleft{float:left; margin-left:0ex; margin-right:1ex;}
.marginparright{float:right; margin-left:1ex; margin-right:0ex;}
.theorem{text-align:left;margin:1ex auto 1ex 0ex;}
.part{margin:2ex auto;text-align:center}
</STYLE>
<LINK REL=STYLESHEET type="text/css" HREF="../../synrc.css">

  <meta name="Author" content="Maxim Sokhatsky">
  <meta http-equiv="expires" content="Tue, 01 Jan 2020 1:00:00 GMT" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=IE10,chrome=1" />
  </HEAD>
<BODY >
<!--HEVEA command line is: /usr/bin/hevea index.tex -o index.htm -->
<!--HTMLHEAD-->

<div class="nonselectedwrapper white" style="padding: 30 10 0 0;margin: 0 0 -12 0;">
<div class="verywidecol">
<nobr>
    <a href="http://synrc.com/index.htm">
    <img style="float:left;margin-right:10px;" src="http://synrc.com/images/synrc.png" border="0"></a>
</nobr>
</div>
</div>

<div class="clear"></div>

<hr size="1">

<div class="nonselectedwrapper" style="margin-top:10px;margin-bottom:10px;background-color: #eeeeee;">
<div class="verywidecol">

    <table bgcolor="white" cellpadding=0 cellspacing=0 width=100%>
    <tbody bgcolor="#eeeeee"><tr height="50" align="center" valign="center">
        <script language="JavaScript">
        <!--
        var args = (window.location).toString().split('/');
        var page_name = args[args.length-1];

        if(page_name == 'index.htm' || page_name ==''){   // Home
            document.write('<td width=20%> <div class="menu">Home</div> </td>');
        }else{
            document.write('<td width=20%> <div class="menu"><a href="http://synrc.com/index.htm">Home</a></div> </td>');
        }

        if(page_name == 'research.htm'){
            document.write('<td width=20%> <div class="menu">Showcase</div> </td>');
        }else{
            document.write('<td width=20%> <div class="menu"><a href="http://synrc.com/research.htm">Showcase</a></div> </td>');
        }

        if(page_name == 'github.htm'){
            document.write('<td width=20%> <div class="menu">Github</div> </td>');
        }else{
            document.write('<td width=20%> <div class="menu"><a href="http://synrc.com/github.htm">Github</a></div> </td>');
        }

        if(page_name == 'feedback.htm'){
            document.write('<td width=20%> <div class="menu">Contacts</div> </td>');
        }else{
            document.write('<td width=20%> <div class="menu"><a href="http://synrc.com/feedback.htm">Contacts</a></div> </td>');
        }

        // -->
        </script>
        <td width=20% background="http://synrc.com/images/dots2.jpg"> </td>
    </tr></tbody></table>

</div>
</div>

<!--ENDHTML-->
<!--CUT DEF section 1 --><DIV CLASS="nonselectedwrapper">
<DIV CLASS="article">
<DIV CLASS="smallcol">
<!--TOC paragraph -->
<H5 CLASS="paragraph"><!--SEC ANCHOR --></H5><!--SEC END --><P>


<IMG SRC="images/n2o.png">


</P></DIV>
<DIV CLASS="articlecol">
<!--TOC section N2O: Erlang Web Framework on WebSockets-->
<H2 CLASS="section"><!--SEC ANCHOR -->N2O: Erlang Web Framework on WebSockets</H2><!--SEC END --><!--TOC subsection WebSockets transport-->
<H3 CLASS="subsection"><!--SEC ANCHOR -->WebSockets transport</H3><!--SEC END --><P> 
Nitrogen 2 Optimized, N2O was started as first Erlang Web Framework
that fully relies on WebSocket transport. Great compatibility with Nitrogen
was retained and many improvements was made like binary page construction,
binary data transfer, all events wire over WebSocket channel, minumum process spawns,
works within Cowboy processes. Page render in N2O is several times faster
than in original Nitrogen.</P><!--TOC subsection Binary events over WebSockets-->
<H3 CLASS="subsection"><!--SEC ANCHOR -->Binary events over WebSockets</H3><!--SEC END --><P>
N2O doesn&#X2019;t use JSON, all message data passed over websockets encoded with
native Erlang External Term Format which is easily parsed in JavaScript
with <B>Bert.decode(msg)</B> and helps to avoid complexity on server-side.
Please refer to <A HREF="http://bert-rpc.org">http://bert-rpc.org</A> for more information.</P><!--TOC subsection Optimized for speed-->
<H3 CLASS="subsection"><!--SEC ANCHOR -->Optimized for speed</H3><!--SEC END --><P>
Original Nitrogen was tested in production under high-load and we decided to drop out
<B>nprocreg</B> process registry along with <B>action_comet</B> heavy process creation. N2O now creates
only one process for async websocket handler, all async operations are handled withing
Cowboy processes.</P><!--TOC subsection Why Erlang in Web ?-->
<H3 CLASS="subsection"><!--SEC ANCHOR -->Why Erlang in Web ?</H3><!--SEC END --><P>
We&#X2019;ve measured all existing modern web frameworks with latest functional languages and Cowboy still the king.
You can see raw HTTP performance of functional and C-like languages with concurrent primitives (Go, D and Rust)
on VAIO Z notebook with i7640M processor:</P><P><img src="http://synrc.com/lj/webcompare/connections.png" style="margin-left: -20px;background-color: #eeeeee;padding:20 20 20 20px;" width=720/>
</P><P>We outperform full Nitrogen stack with only 2X downgrade of raw HTTP Cowboy
performance thus rise rendering performance several times in compare to
any other functional web framework and for sure it is faster than raw HTTP node.js performance.</P><!--TOC subsection Desktop and Mobile Applications-->
<H3 CLASS="subsection"><!--SEC ANCHOR -->Desktop and Mobile Applications</H3><!--SEC END --><P>
There is two approaches to design communications between client/server.
The first is called data-on-wire, where only data transfers on channel
through through RPC, REST in form of JSON, XML or Binary. All rendering
in first type are being made on client side. This calls rich client and
mostly fits for desktop. The examples are Chaplin/CoffeScript and Meteor/JavaScript.
</P><!--TOC paragraph -->
<H5 CLASS="paragraph"><!--SEC ANCHOR --></H5><!--SEC END --><P>
The other approach is to send server prerendered part of pages and javascript,
and on client side only replace HTML parts and execute JavaScript. This approach
better fits for mobile applications, where client doesn&#X2019;t have much resources.
</P><!--TOC paragraph -->
<H5 CLASS="paragraph"><!--SEC ANCHOR --></H5><!--SEC END --><P>
Using N2O you could create both types of applications: using N2O REST framework
for first type of application based on Cowboy REST features alogn with DTL
templates for initial HTML renderings, and also Nitrogen DSL-based approach
to model parts of the pages as widgets and control elements thanks to rich
Nitrogen elements collections provided by Nitrogen community.
</P><!--TOC paragraph -->
<H5 CLASS="paragraph"><!--SEC ANCHOR --></H5><!--SEC END --><P>
o, in cases when your system is built around Erlang infrastructure, N2O
is the best choice that you could made for fast prototyping, simpicity
of use, codebase maintanance, etc. Despite HTML tranfer over the wire,
you will still have access to all your erlang services directly.</P><!--TOC subsection Templates vs DSL-->
<H3 CLASS="subsection"><!--SEC ANCHOR -->Templates vs DSL</H3><!--SEC END --><P>
We liked Nitrogen for simple and elegant way of typed HTML page
construction with DSL, based on host language as its done in Scala Lift,
OCaml Ocsigen and Haskell Blaze. It helps to develop reusable control
elements and components in host language.
</P><!--TOC paragraph -->
<H5 CLASS="paragraph"><!--SEC ANCHOR --></H5><!--SEC END --><P>
Template-based approach pushes programmers to deal with raw HTML,
like Yesod, ASP, PHP, JSP, Rails, Yaws, ChicagoBoss. It help to
define the page in terms of top-level consist of controls, playholders
and panels. So N2O combine both approaches.
</P><!--TOC paragraph -->
<H5 CLASS="paragraph"><!--SEC ANCHOR --></H5><!--SEC END --><P>
Main N2O attraction is the fast prototyping. We also use it in large
scale projects. Here is the complete Web Chat example working with
WebSockets that demonstrate the use of Templates, DSL and async
interprocesses communications:</P><P><code>
-module(index).
-compile(export_all).
-include_lib("n2o/include/wf.hrl").

main() -> #template { file= code:priv_dir(web) ++ "/templates/index.html" }.
title() -> <<"N2O">>.

body() -> %% area of http handler
    {ok,Pid} = wf:comet(fun() -> chat_loop() end),
  [ #span { text= <<"Your chatroom name: ">> }, 
    #textbox { id=userName, text= <<"Anonymous">> },
    #panel { id=chatHistory, class=chat_history },
    #textbox { id=message },
    #button { id=sendButton, text= <<"Send">>, postback={chat,Pid}, source=[userName,message] },
    #panel { id=status } ].

event({chat,Pid}) -> %% area of websocket handler
    Username = wf:q(userName),
    Message = wf:q(message),
    Terms = [ #span { text="Message sent" }, #br{} ],
    wf:insert_bottom(chatHistory, Terms),
    wf:wire("$('#message').focus(); $('#message').select(); "),
    wf:reg(room),
    Pid ! {message, Username, Message};

event(Event) -> error_logger:info_msg("Event: ~p", [Event]).

chat_loop() -> %% background worker ala comet
    receive 
        {message, Username, Message} ->
            Terms = [ #span { text=Username }, ": ",
                      #span { text=Message }, #br{} ],
            wf:insert_bottom(chatHistory, Terms),
            wf:wire("$('#chatHistory').scrollTop = $('#chatHistory').scrollHeight;"),
            wf:flush(room); %% we flush to websocket process by key
        Unknown -> error_logger:info_msg("Unknown Looper Message ~p",[Unknown])
    end,
    chat_loop().

</code>
</P><P>And try to perform it in your favourite language/framework.</P><!--TOC subsection Clean codebase and pure render-->
<H3 CLASS="subsection"><!--SEC ANCHOR -->Clean codebase and pure render</H3><!--SEC END --><P>
We feel free to brake some of the compatability with the original
Nitrogen project, mostly because we want to have a clean codebase
and fastest speed. However, it is still possible to easily port
Nitrogen web sites to N2O. E.g. N2O returns id and class semantics
of HTML and not html_id. We simplified rendering by not using
html_encode which should be handled by the application layer.
Nitrogen.js that was originally created by Rusty Klophaus,
has been removed due to pure simplified WebSocket nature of N2O.
We added XHR fallback handling through Extend Bullet by Loc Hoguin.
We dropped simple_bridge and optimize N2O on every level for you
to be sure its fastest way to develop application on erlang.</P><P><code>

&lt;input id="sendButton" type="button" class="sendButton button" value="Send"/&gt;
&lt;script&gt;$('#sendButton').bind('click',function anonymous(event) { 
      ws.send(Bert.encodebuf({source: Bert.binary('sendButton'), 
                              pickle: Bert.binary('R2LH0INQAAAAWXicy2DKYEt...'),
                              x: Bert.binary('undefined')}));});&lt;/script&gt;

</code>
</P><P>
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'synrc'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    
</P></DIV><DIV CLASS="toc last"><!--TOC section TOC-->
<H2 CLASS="section"><!--SEC ANCHOR -->TOC</H2><!--SEC END --><!--TOC paragraph -->
<H5 CLASS="paragraph"><!--SEC ANCHOR --></H5><!--SEC END --><P>
<A HREF="http://synrc.com/framework/web/">Overview</A> <BR>

<A HREF="http://synrc.com/framework/web/setup.htm">1. Setup</A> <BR>

<A HREF="http://synrc.com/framework/web/architecture.htm">2. Architecture</A> <BR>

<A HREF="http://synrc.com/framework/web/elements.htm">3. Elements</A> <BR>

<A HREF="http://synrc.com/framework/web/actions.htm">4. Actions</A> <BR>

<A HREF="http://synrc.com/framework/web/api.htm">5. Core API</A> <BR>

<A HREF="http://synrc.com/framework/web/extending.htm">6. Extending</A> <BR>

</P></DIV></DIV>
</DIV><DIV CLASS="clear">&#XA0;</DIV><!--CUT END -->
<!--HTMLFOOT-->

<div class="nonselectedwrapper">
<div class="verywidecol">

    <div style="width:100%;height:300px;float:left;font-size:14pt;" align=center>
    	<hr size=1>
        <span class="logo_font" style="font-size:14pt;">
            <b><font color="#0033cc">syn</font><font color="#ff0000">rc</font></b></span> uses H<FONT SIZE=1><sup>E</sup></FONT>V<FONT SIZE=1><sup>E</sup></FONT>A<br>
    	<a href="http://synrc.com/privacy.htm">Privacy Policy</a> |
        <a href="http://synrc.com/feedback.htm">Feedback</a> |
        <a href="http://synrc.com/brandbook.htm">Brandbook</a><br>
        <a href="http://synrc.com:8010/one_line_per_build">Latest Builds</a> |
        <a href="http://synrc.com/music">Music</a><br>
    	Copyright &copy; 2005&ndash;2013 <a href="http://synrc.com/index.htm"> Synrc Research Center s.r.o.</a>
    </div>

</div>
</div>

<div class="clear"></div>

<script type="text/javascript">

  var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-29227518-1']);
      _gaq.push(['_trackPageview']);
      
        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
                      })();
                      
                      </script>

<script type="text/javascript" src="http://synrc.com/hi.js"></script>
                      <!--ENDHTML-->
</BODY>
</HTML>
