<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
            "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>
<HEAD>
<TITLE>N2O
</TITLE>

<META http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<META name="GENERATOR" content="hevea 1.10">
<STYLE type="text/css">
.li-itemize{margin:1ex 0ex;}
.li-enumerate{margin:1ex 0ex;}
.dd-description{margin:0ex 0ex 1ex 4ex;}
.dt-description{margin:0ex;}
.toc{list-style:none;}
.thefootnotes{text-align:left;margin:0ex;}
.dt-thefootnotes{margin:0em;}
.dd-thefootnotes{margin:0em 0em 0em 2em;}
.footnoterule{margin:1em auto 1em 0px;width:50%;}
.caption{padding-left:2ex; padding-right:2ex; margin-left:auto; margin-right:auto}
.title{margin:2ex auto;text-align:center}
.center{text-align:center;margin-left:auto;margin-right:auto;}
.flushleft{text-align:left;margin-left:0ex;margin-right:auto;}
.flushright{text-align:right;margin-left:auto;margin-right:0ex;}
DIV TABLE{margin-left:inherit;margin-right:inherit;}
PRE{text-align:left;margin-left:0ex;margin-right:auto;}
BLOCKQUOTE{margin-left:4ex;margin-right:4ex;text-align:left;}
TD P{margin:0px;}
.boxed{border:1px solid black}
.textboxed{border:1px solid black}
.vbar{border:none;width:2px;background-color:black;}
.hbar{border:none;height:2px;width:100%;background-color:black;}
.hfill{border:none;height:1px;width:200%;background-color:black;}
.vdisplay{border-collapse:separate;border-spacing:2px;width:auto; empty-cells:show; border:2px solid red;}
.vdcell{white-space:nowrap;padding:0px;width:auto; border:2px solid green;}
.display{border-collapse:separate;border-spacing:2px;width:auto; border:none;}
.dcell{white-space:nowrap;padding:0px;width:auto; border:none;}
.dcenter{margin:0ex auto;}
.vdcenter{border:solid #FF8000 2px; margin:0ex auto;}
.minipage{text-align:left; margin-left:0em; margin-right:auto;}
.marginpar{border:solid thin black; width:20%; text-align:left;}
.marginparleft{float:left; margin-left:0ex; margin-right:1ex;}
.marginparright{float:right; margin-left:1ex; margin-right:0ex;}
.theorem{text-align:left;margin:1ex auto 1ex 0ex;}
.part{margin:2ex auto;text-align:center}
</STYLE>
<LINK REL=STYLESHEET type="text/css" HREF="../../synrc.css">

<meta name="Author" content="Maxim Sokhatsky">
<meta http-equiv="expires" content="Tue, 01 Jan 2020 1:00:00 GMT" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=IE10,chrome=1" />
</HEAD>
<BODY >
<!--HEVEA command line is: /usr/bin/hevea framework/web/index.tex -o framework/web/index.htm -->
<!--HTMLHEAD-->

<div class="nonselectedwrapper white" style="padding: 30 10 0 0;margin: 0 0 -12 0;">
<div class="verywidecol">
<nobr>
    <a href="http://synrc.com/index.htm">
    <img style="float:left;margin-right:10px;" src="http://synrc.com/images/synrc.png" border="0"></a>
</nobr>
</div>
</div>

<div class="clear"></div>

<hr size="1">

<div class="nonselectedwrapper" style="margin-top:10px;margin-bottom:10px;background-color: #eeeeee;">
<div class="verywidecol">

    <table bgcolor="white" cellpadding=0 cellspacing=0 width=100%>
    <tbody bgcolor="#eeeeee"><tr height="50" align="center" valign="center">
        <script language="JavaScript">
        <!--
        var args = (window.location).toString().split('/');
        var page_name = args[args.length-1];

        if(page_name == 'index.htm' || page_name ==''){   // Home
            document.write('<td width=20%> <div class="menu">Home</div> </td>');
        }else{
            document.write('<td width=20%> <div class="menu"><a href="http://synrc.com/index.htm">Home</a></div> </td>');
        }

        if(page_name == 'research.htm'){
            document.write('<td width=20%> <div class="menu">Showcase</div> </td>');
        }else{
            document.write('<td width=20%> <div class="menu"><a href="http://synrc.com/research.htm">Showcase</a></div> </td>');
        }

        if(page_name == 'github.htm'){
            document.write('<td width=20%> <div class="menu">Github</div> </td>');
        }else{
            document.write('<td width=20%> <div class="menu"><a href="http://synrc.com/github.htm">Github</a></div> </td>');
        }

        if(page_name == 'feedback.htm'){
            document.write('<td width=20%> <div class="menu">Contacts</div> </td>');
        }else{
            document.write('<td width=20%> <div class="menu"><a href="http://synrc.com/feedback.htm">Contacts</a></div> </td>');
        }

        // -->
        </script>
        <td width=20% background="http://synrc.com/images/dots2.jpg"> </td>
    </tr></tbody></table>

</div>
</div>

<!--ENDHTML-->
<!--CUT DEF section 1 --><DIV CLASS="nonselectedwrapper">
<DIV CLASS="article">
<DIV CLASS="smallcol">
<!--TOC paragraph -->
<H5 CLASS="paragraph"><!--SEC ANCHOR --></H5><!--SEC END --><P>


<IMG SRC="../../images/n2o.png">


</P></DIV>
<DIV CLASS="articlecol">
<!--TOC section N2O: Fastest Web Framework for Erlang-->
<H2 CLASS="section"><!--SEC ANCHOR -->N2O: Fastest Web Framework for Erlang</H2><!--SEC END --><!--TOC subsection Highlights-->
<H3 CLASS="subsection"><!--SEC ANCHOR -->Highlights</H3><!--SEC END --><P>
Nitrogen 2 Optimized. Binary page construction.
Binary data transfer. Websocket async interface for
page updates. No processes spawn, works within
Cowboy processes. Page render is several times faster than
original Nitrogen. nprocreg was removed due to gap in design.</P><!--TOC subsection Why Erlang in Web ?-->
<H3 CLASS="subsection"><!--SEC ANCHOR -->Why Erlang in Web ?</H3><!--SEC END --><P>
We&#X2019;ve measured all existing modern web frameworks with latest functional languages and Cowboy still the king.
You can see raw HTTP performance of functional and C-like languages with concurrent primitives (Go, D and Rust)
on VAIO Z notebook with i7640M processor:</P><P><img src="http://synrc.com/lj/webcompare/connections.png" style="margin-left: -20px;background-color: #eeeeee;padding:20 20 20 20px;" width=720/>
</P><P>We outperform full Nitrogen stack with only 2X downgrade of raw HTTP Cowboy
performance thus rise rendering performance several times in compare to
any other functional web framework and for sure it is faster than raw HTTP node.js performance.</P><!--TOC subsection Binary events over WebSockets-->
<H3 CLASS="subsection"><!--SEC ANCHOR -->Binary events over WebSockets</H3><!--SEC END --><P>
N2O doesn&#X2019;t use JSON, all message data passed over websockets encoded with
External Term Formal, native Erlang binaries and easily parsed in JavaScript
with Bert.decode(msg) and avoid complexity on server-side.</P><!--TOC subsection Optimized for speed-->
<H3 CLASS="subsection"><!--SEC ANCHOR -->Optimized for speed</H3><!--SEC END --><P>
Original Nitrogen was tested in production on high-load and we decided to drop out
nprocreg process registry along with action_comet heavy process creation. N2O now creates
only one process for async websocket looper, all async operations are handled withing
Cowboy processes.</P><!--TOC subsection Erlang DSL for Web-->
<H3 CLASS="subsection"><!--SEC ANCHOR -->Erlang DSL for Web</H3><!--SEC END --><P>
We choose Nitrogen for simple and elegant way of typed HTML page construction like 
in Scala Lift, OCaml Ocsigen and Haskell Happstack.
Templated based approach pushes to to deal with raw HTML, like 
Yesod, ASP, PHP, JSP, Rails, Yaws, ChicagoBoss.
N2O goes further and optimize rendering from binary iolists instead of slow Erlang
lists originated by Nitrogen.</P><P><code>

-module(chat).
-include_lib ("n2o/include/wf.hrl").
-compile(export_all).

main() -> #template { file="./templates/chat.htm" }.

body() ->
    wf:comet_global(fun() -> chat_loop() end, chatroom),
    [   #span { text=<<"Your chatroom name: ">> }, 
        #textbox { id=userNameTextBox, text=<<"Anonymous">>, next=messageTextBox },
        #panel { id=chatHistory, class=chat_history },
        #textbox { id=messageTextBox, style=<<"width: 70%;">>, next=sendButton },
        #button { id=sendButton, text=<<"Send">>, postback=chat } ].

event(chat) ->
    Username = wf:q(userNameTextBox),
    Message = wf:q(messageTextBox),
    wf:send_global(chatroom, {message, Username, Message}),
    wf:wire("obj('messageTextBox').focus(); obj('messageTextBox').select();");

chat_loop() ->
    receive 
        {message, Username, Message} ->
            Terms = [ #span { text=Username, class=username }, <<": ">>,
                      #span { text=Message, class=message } ],
            wf:insert_bottom(chatHistory, Terms)
    end,
    chat_loop().

</code>
</P><!--TOC subsection Clean codebase-->
<H3 CLASS="subsection"><!--SEC ANCHOR -->Clean codebase</H3><!--SEC END --><P>
We feel free to brake original Nitrogen compatibility because we want to have clean codebase.
However we still able to easily port old Nitrogen web sites to N2O.</P></DIV><DIV CLASS="toc last">
<!--TOC section TOC-->
<H2 CLASS="section"><!--SEC ANCHOR -->TOC</H2><!--SEC END --><!--TOC paragraph -->
<H5 CLASS="paragraph"><!--SEC ANCHOR --></H5><!--SEC END --><P>
<A HREF="">Overview</A> <BR>

<A HREF="">1. Architecture</A> <BR>

<A HREF="">2. Rendering</A> <BR>

<A HREF="">3. Push</A> <BR>

<A HREF="">4. Samples</A> <BR>

</P></DIV></DIV>
</DIV><DIV CLASS="clear">&#XA0;</DIV><!--CUT END -->
<!--HTMLFOOT-->

<div class="nonselectedwrapper">
<div class="verywidecol">

    <div style="width:100%;height:300px;float:left;font-size:14pt;" align=center>
    	<hr size=1>
        <span class="logo_font" style="font-size:14pt;">
            <b><font color="#0033cc">syn</font><font color="#ff0000">rc</font></b></span> uses H<FONT SIZE=1><sup>E</sup></FONT>V<FONT SIZE=1><sup>E</sup></FONT>A<br>
    	<a href="http://synrc.com/privacy.htm">Privacy Policy</a> |
        <a href="http://synrc.com/feedback.htm">Feedback</a> |
        <a href="http://synrc.com/brandbook.htm">Brandbook</a><br>
        <a href="http://synrc.com:8010/one_line_per_build">Latest Builds</a> |
        <a href="http://synrc.com/music">Music</a><br>
    	Copyright &copy; 2005&ndash;2013 <a href="http://synrc.com/index.htm"> Synrc Research Center s.r.o.</a>
    </div>

</div>
</div>

<div class="clear"></div>

<script type="text/javascript">

  var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-29227518-1']);
      _gaq.push(['_trackPageview']);
      
        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
                      })();
                      
                      </script>

<script type="text/javascript" src="http://synrc.com/hi.js"></script>
                      <!--ENDHTML-->
</BODY>
</HTML>
