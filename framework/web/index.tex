\documentclass[11pt]{article}
\usepackage{ifthen}
\usepackage{graphicx}
\usepackage{cite}
\usepackage{hevea}
\input{../../synrc.hva}
%HEVEA \loadcssfile{../../synrc.css}
\begin{document}

\title{N2O: Overview}
\author{Maxim Sokhatsky}

%HEVEA \begin{divstyle}{nonselectedwrapper}
%HEVEA \begin{divstyle}{article}
%HEVEA \begin{divstyle}{smallcol}
\paragraph{}
\includeimage{images/n2o.png}
%HEVEA \end{divstyle}
%HEVEA \begin{divstyle}{articlecol}
\section*{N2O: Fastest Web Framework for Erlang Cookbook}

\subsection*{WebSockets transport}
Nitrogen 2 Optimized, N2O was started as first Erlang Web Framework
that fully relies on WebSocket transport. Great compatibility with Nitrogen
was retained and many improvements was made like binary page construction,
binary data transfer, all events wire over WebSocket channel, minumum process spawns,
works within Cowboy processes. Page render in N2O is several times faster
than in original Nitrogen.

\subsection*{Binary events over WebSockets}
N2O doesn't use JSON, all message data passed over websockets encoded with
native Erlang External Term Format which is easily parsed in JavaScript
with {\bf Bert.decode(msg)} and helps to avoid complexity on server-side.
Please refer to \footahref{http://bert-rpc.org}{http://bert-rpc.org} for more information.

\subsection*{Optimized for speed}
Original Nitrogen was tested in production under high-load and we decided to drop out
{\bf nprocreg} process registry along with {\bf{action\_comet}} heavy process creation. N2O now creates
only one process for async websocket handler, all async operations are handled withing
Cowboy processes.

\subsection*{Why Erlang in Web ?}
We've measured all existing modern web frameworks with latest functional languages and Cowboy still the king.
You can see raw HTTP performance of functional and C-like languages with concurrent primitives (Go, D and Rust)
on VAIO Z notebook with i7640M processor:

%HEVEA \rawhtmlinput{templates/webservers.htx}

We outperform full Nitrogen stack with only 2X downgrade of raw HTTP Cowboy
performance thus rise rendering performance several times in compare to
any other functional web framework and for sure it is faster than raw HTTP node.js performance.

\subsection*{Sending HTML5 over wire?}
N2O do that. However we agree that most advanced technology is to send
only domain data over network (JSON or Binary) like you do with Chaplin/CoffeScript and Meteor/JavaScript.
However Meteor is Node-based. And with ``everything on client'' model would not be
possible to prototype services easily with all your Erlang infrastructure --- you
should prototype a protocol always along with client.

So in case you system is built aroung Erlang infrastructure, N2O is best
choice you could made for fast prototyping, easy of use, maintanance of codebase, etc.
Despite HTML5 is tranfered over wire, you will have at hands access
to all your erlang services directly.

\subsection*{Templates vs DSL}
We choose Nitrogen for simple and elegant way of typed HTML page construction like 
in Scala Lift, OCaml Ocsigen and Haskell Happstack.
Templated based approach pushes to to deal with raw HTML, like 
Yesod, ASP, PHP, JSP, Rails, Yaws, ChicagoBoss.
N2O goes further and optimize rendering from binary iolists instead of slow Erlang
lists originated by Nitrogen.
\paragraph{}
Main quality of N2O is fast prototyping. We also use it in large scale projects.
You can see complete chat example working through WebSockets:

%HEVEA \rawhtmlinput{templates/chat.htx}

And try to perform it in your favourite language/framework.

\subsection*{Clean codebase and pure render}
We feel free to brake original Nitrogen compatibility because we want to have clean codebase.
However we still able to easily port old Nitrogen web sites to N2O. 
E.g. we return back {\bf id} and {\bf class} semantics of HTML and removed {\bf html\_id}.
We simplify render without {\bf html\_encode} which should be handled by application layer.
{\bf nitrogen.js} originaly created by Rusty Klophaus for XHR was removed due to pure
WebSocket nature of N2O and native jQuery handling.

%HEVEA \rawhtmlinput{templates/n2o_render_sample.htx}

%HEVEA \rawhtmlinput{templates/disqus.htx}

%HEVEA \end{divstyle}

%HEVEA \begin{divstyle}{toc last}

\input{toc}

%HEVEA \end{divstyle}

%HEVEA \end{divstyle}
%HEVEA \end{divstyle}
%HEVEA \begin{divstyle}{clear}{~}\end{divstyle}

\end{document}

